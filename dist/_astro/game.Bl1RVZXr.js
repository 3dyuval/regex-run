import{l as Kt,m as ve,p as ge,s as Rt,g as et,d as N,j,w as g,a as m,b as y,c as I,i as dt,F as nt,r as x,h as $,o as S,t as k,q as K,e as T,u as _e,f as L,n as Xt,v as ye}from"./vuetify.5cG0S0Hg.js";import{d as xe,s as be}from"./pinia.BGClL0zh.js";import{u as Se,a as Q,b as we}from"./index.NlgHnuFG.js";/* empty css                       */import{_ as Z}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{g as ke,R as Te,a as Ee,d as Ae}from"./regex-features.Dth4DYyE.js";/* empty css                                   */function Ie(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Ce(){const e=Ie();if(e.__xstate__)return e.__xstate__}const Le=e=>{if(typeof window>"u")return;const t=Ce();t&&t.register(e)};class Dt{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const n={value:t,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const Ht=".",$e="",Yt="",je="#",Me="*",Nt="xstate.init",xt="xstate.stop";function Oe(e,t){return{type:`xstate.after.${e}.${t}`}}function bt(e,t){return{type:`xstate.done.state.${e}`,output:t}}function Re(e,t){return{type:`xstate.done.actor.${e}`,output:t,actorId:e}}function De(e,t){return{type:`xstate.error.actor.${e}`,error:t,actorId:e}}function Zt(e){return{type:Nt,input:e}}function C(e){setTimeout(()=>{throw e})}const Ve=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qt(e,t){const n=Vt(e),s=Vt(t);return typeof s=="string"?typeof n=="string"?s===n:!1:typeof n=="string"?n in s:Object.keys(n).every(i=>i in s?Qt(n[i],s[i]):!1)}function Tt(e){if(ee(e))return e;const t=[];let n="";for(let s=0;s<e.length;s++){switch(e.charCodeAt(s)){case 92:n+=e[s+1],s++;continue;case 46:t.push(n),n="";continue}n+=e[s]}return t.push(n),t}function Vt(e){if(yn(e))return e.value;if(typeof e!="string")return e;const t=Tt(e);return ze(t)}function ze(e){if(e.length===1)return e[0];const t={};let n=t;for(let s=0;s<e.length-1;s++)if(s===e.length-2)n[e[s]]=e[s+1];else{const i=n;n={},i[e[s]]=n}return t}function zt(e,t){const n={},s=Object.keys(e);for(let i=0;i<s.length;i++){const o=s[i];n[o]=t(e[o],o,e,i)}return n}function te(e){return ee(e)?e:[e]}function V(e){return e===void 0?[]:te(e)}function St(e,t,n,s){return typeof e=="function"?e({context:t,event:n,self:s}):e}function ee(e){return Array.isArray(e)}function Ue(e){return e.type.startsWith("xstate.error.actor")}function q(e){return te(e).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function ne(e){if(!(e===void 0||e===$e))return V(e)}function rt(e,t,n){const s=typeof e=="object",i=s?e:void 0;return{next:(s?e.next:e)?.bind(i),error:(s?e.error:t)?.bind(i),complete:(s?e.complete:n)?.bind(i)}}function Ut(e,t){return`${t}.${e}`}function Et(e,t){const n=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return e.implementations.actors[t];const[,s,i]=n,r=e.getStateNodeById(i).config.invoke;return(Array.isArray(r)?r[s]:r).src}function Be(e,t){if(t===e||t===Me)return!0;if(!t.endsWith(".*"))return!1;const n=t.split("."),s=e.split(".");for(let i=0;i<n.length;i++){const o=n[i],r=s[i];if(o==="*")return i===n.length-1;if(o!==r)return!1}return!0}function Bt(e,t){return`${e.sessionId}.${t}`}let Pe=0;function Je(e,t){const n=new Map,s=new Map,i=new WeakMap,o=new Set,r={},{clock:a,logger:c}=t,l={schedule:(d,f,p,_,v=Math.random().toString(36).slice(2))=>{const b={source:d,target:f,event:p,delay:_,id:v,startedAt:Date.now()},w=Bt(d,v);u._snapshot._scheduledEvents[w]=b;const E=a.setTimeout(()=>{delete r[w],delete u._snapshot._scheduledEvents[w],u._relay(d,f,p)},_);r[w]=E},cancel:(d,f)=>{const p=Bt(d,f),_=r[p];delete r[p],delete u._snapshot._scheduledEvents[p],_!==void 0&&a.clearTimeout(_)},cancelAll:d=>{for(const f in u._snapshot._scheduledEvents){const p=u._snapshot._scheduledEvents[f];p.source===d&&l.cancel(d,p.id)}}},h=d=>{if(!o.size)return;const f={...d,rootId:e.sessionId};o.forEach(p=>p.next?.(f))},u={_snapshot:{_scheduledEvents:(t?.snapshot&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${Pe++}`,_register:(d,f)=>(n.set(d,f),d),_unregister:d=>{n.delete(d.sessionId);const f=i.get(d);f!==void 0&&(s.delete(f),i.delete(d))},get:d=>s.get(d),getAll:()=>Object.fromEntries(s.entries()),_set:(d,f)=>{const p=s.get(d);if(p&&p!==f)throw new Error(`Actor with system ID '${d}' already exists.`);s.set(d,f),i.set(f,d)},inspect:d=>{const f=rt(d);return o.add(f),{unsubscribe(){o.delete(f)}}},_sendInspectionEvent:h,_relay:(d,f,p)=>{u._sendInspectionEvent({type:"@xstate.event",sourceRef:d,actorRef:f,event:p}),f._send(p)},scheduler:l,getSnapshot:()=>({_scheduledEvents:{...u._snapshot._scheduledEvents}}),start:()=>{const d=u._snapshot._scheduledEvents;u._snapshot._scheduledEvents={};for(const f in d){const{source:p,target:_,event:v,delay:b,id:w}=d[f];l.schedule(p,_,v,b,w)}},_clock:a,_logger:c};return u}let gt=!1;const At=1;let A=(function(e){return e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped",e})({});const Fe={clock:{setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},logger:console.log.bind(console),devTools:!1};class Ge{constructor(t,n){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Dt(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=A.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this.systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const s={...Fe,...n},{clock:i,logger:o,parent:r,syncSnapshot:a,id:c,systemId:l,inspect:h}=s;this.system=r?r.system:Je(this,{clock:i,logger:o}),h&&!r&&this.system.inspect(rt(h)),this.sessionId=this.system._bookId(),this.id=c??this.sessionId,this.logger=n?.logger??this.system._logger,this.clock=n?.clock??this.system._clock,this._parent=r,this._syncSnapshot=a,this.options=s,this.src=s.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:u=>{this._deferred.push(u)},system:this.system,stopChild:u=>{if(u._parent!==this)throw new Error(`Cannot stop child actor ${u.id} of ${this.id} because it is not a child`);u._stop()},emit:u=>{const d=this.eventListeners.get(u.type),f=this.eventListeners.get("*");if(!d&&!f)return;const p=[...d?d.values():[],...f?f.values():[]];for(const _ of p)try{_(u)}catch(v){C(v)}},actionExecutor:u=>{const d=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:u.type,params:u.params}}),!u.exec)return;const f=gt;try{gt=!0,u.exec(u.info,u.params)}finally{gt=f}};this._processingStatus===A.Running?d():this._deferred.push(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),l&&(this.systemId=l,this.system._set(l,this)),this._initState(n?.snapshot??n?.state),l&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(n){this._snapshot={status:"error",output:void 0,error:n}}}update(t,n){this._snapshot=t;let s;for(;s=this._deferred.shift();)try{s()}catch(i){this._deferred.length=0,this._snapshot={...t,status:"error",error:i}}switch(this._snapshot.status){case"active":for(const i of this.observers)try{i.next?.(t)}catch(o){C(o)}break;case"done":for(const i of this.observers)try{i.next?.(t)}catch(o){C(o)}this._stopProcedure(),this._complete(),this._doneEvent=Re(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:t})}subscribe(t,n,s){const i=rt(t,n,s);if(this._processingStatus!==A.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{i.complete?.()}catch(o){C(o)}break;case"error":{const o=this._snapshot.error;if(!i.error)C(o);else try{i.error(o)}catch(r){C(r)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(t,n){let s=this.eventListeners.get(t);s||(s=new Set,this.eventListeners.set(t,s));const i=n.bind(void 0);return s.add(i),{unsubscribe:()=>{s.delete(i)}}}start(){if(this._processingStatus===A.Running)return this;this._syncSnapshot&&this.subscribe({next:s=>{s.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:s})},error:()=>{}}),this.system._register(this.sessionId,this),this.systemId&&this.system._set(this.systemId,this),this._processingStatus=A.Running;const t=Zt(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(s){return this._snapshot={...this._snapshot,status:"error",error:s},this._error(s),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let n,s;try{n=this.logic.transition(this._snapshot,t,this._actorScope)}catch(i){s={err:i}}if(s){const{err:i}=s;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,t),t.type===xt&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===A.Stopped?this:(this.mailbox.clear(),this._processingStatus===A.NotStarted?(this._processingStatus=A.Stopped,this):(this.mailbox.enqueue({type:xt}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const t of this.observers)try{t.complete?.()}catch(n){C(n)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||C(t);return}let n=!1;for(const s of this.observers){const i=s.error;n||=!i;try{i?.(t)}catch(o){C(o)}}this.observers.clear(),n&&C(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,De(this.id,t))}_stopProcedure(){return this._processingStatus!==A.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Dt(this._process.bind(this)),this._processingStatus=A.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==A.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:Le)(this)}toJSON(){return{xstate$$type:At,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[Ve](){return this}getSnapshot(){return this._snapshot}}function st(e,...[t]){return new Ge(e,t)}function qe(e,t,n,s,{sendId:i}){const o=typeof i=="function"?i(n,s):i;return[t,{sendId:o},void 0]}function We(e,t){e.defer(()=>{e.system.scheduler.cancel(e.self,t.sendId)})}function Ke(e){function t(n,s){}return t.type="xstate.cancel",t.sendId=e,t.resolve=qe,t.execute=We,t}function Xe(e,t,n,s,{id:i,systemId:o,src:r,input:a,syncSnapshot:c}){const l=typeof r=="string"?Et(t.machine,r):r,h=typeof i=="function"?i(n):i;let u,d;return l&&(d=typeof a=="function"?a({context:t.context,event:n.event,self:e.self}):a,u=st(l,{id:h,src:r,parent:e.self,syncSnapshot:c,systemId:o,input:d})),[F(t,{children:{...t.children,[h]:u}}),{id:i,systemId:o,actorRef:u,src:r,input:d},void 0]}function He(e,{actorRef:t}){t&&e.defer(()=>{t._processingStatus!==A.Stopped&&t.start()})}function Ye(...[e,{id:t,systemId:n,input:s,syncSnapshot:i=!1}={}]){function o(r,a){}return o.type="xstate.spawnChild",o.id=t,o.systemId=n,o.src=e,o.input=s,o.syncSnapshot=i,o.resolve=Xe,o.execute=He,o}function Ne(e,t,n,s,{actorRef:i}){const o=typeof i=="function"?i(n,s):i,r=typeof o=="string"?t.children[o]:o;let a=t.children;return r&&(a={...a},delete a[r.id]),[F(t,{children:a}),r,void 0]}function Ze(e,t){if(t){if(e.system._unregister(t),t._processingStatus!==A.Running){e.stopChild(t);return}e.defer(()=>{e.stopChild(t)})}}function se(e){function t(n,s){}return t.type="xstate.stopChild",t.actorRef=e,t.resolve=Ne,t.execute=Ze,t}function It(e,t,n,s){const{machine:i}=s,o=typeof e=="function",r=o?e:i.implementations.guards[typeof e=="string"?e:e.type];if(!o&&!r)throw new Error(`Guard '${typeof e=="string"?e:e.type}' is not implemented.'.`);if(typeof r!="function")return It(r,t,n,s);const a={context:t,event:n},c=o||typeof e=="string"?void 0:"params"in e?typeof e.params=="function"?e.params({context:t,event:n}):e.params:void 0;return"check"in r?r.check(s,a,r):r(a,c)}const Ct=e=>e.type==="atomic"||e.type==="final";function X(e){return Object.values(e.states).filter(t=>t.type!=="history")}function it(e,t){const n=[];if(t===e)return n;let s=e.parent;for(;s&&s!==t;)n.push(s),s=s.parent;return n}function at(e){const t=new Set(e),n=oe(t);for(const s of t)if(s.type==="compound"&&(!n.get(s)||!n.get(s).length))Pt(s).forEach(i=>t.add(i));else if(s.type==="parallel"){for(const i of X(s))if(i.type!=="history"&&!t.has(i)){const o=Pt(i);for(const r of o)t.add(r)}}for(const s of t){let i=s.parent;for(;i;)t.add(i),i=i.parent}return t}function ie(e,t){const n=t.get(e);if(!n)return{};if(e.type==="compound"){const i=n[0];if(i){if(Ct(i))return i.key}else return{}}const s={};for(const i of n)s[i.key]=ie(i,t);return s}function oe(e){const t=new Map;for(const n of e)t.has(n)||t.set(n,[]),n.parent&&(t.has(n.parent)||t.set(n.parent,[]),t.get(n.parent).push(n));return t}function re(e,t){const n=at(t);return ie(e,oe(n))}function Lt(e,t){return t.type==="compound"?X(t).some(n=>n.type==="final"&&e.has(n)):t.type==="parallel"?X(t).every(n=>Lt(e,n)):t.type==="final"}const ft=e=>e[0]===je;function Qe(e,t){return e.transitions.get(t)||[...e.transitions.keys()].filter(s=>Be(t,s)).sort((s,i)=>i.length-s.length).flatMap(s=>e.transitions.get(s))}function tn(e){const t=e.config.after;if(!t)return[];const n=i=>{const o=Oe(i,e.id),r=o.type;return e.entry.push(Cn(o,{id:r,delay:i})),e.exit.push(Ke(r)),r};return Object.keys(t).flatMap(i=>{const o=t[i],r=typeof o=="string"?{target:o}:o,a=Number.isNaN(+i)?i:+i,c=n(a);return V(r).map(l=>({...l,event:c,delay:a}))}).map(i=>{const{delay:o}=i;return{...P(e,i.event,i),delay:o}})}function P(e,t,n){const s=ne(n.target),i=n.reenter??!1,o=sn(e,s),r={...n,actions:V(n.actions),guard:n.guard,target:o,source:e,reenter:i,eventType:t,toJSON:()=>({...r,source:`#${e.id}`,target:o?o.map(a=>`#${a.id}`):void 0})};return r}function en(e){const t=new Map;if(e.config.on)for(const n of Object.keys(e.config.on)){if(n===Yt)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const s=e.config.on[n];t.set(n,q(s).map(i=>P(e,n,i)))}if(e.config.onDone){const n=`xstate.done.state.${e.id}`;t.set(n,q(e.config.onDone).map(s=>P(e,n,s)))}for(const n of e.invoke){if(n.onDone){const s=`xstate.done.actor.${n.id}`;t.set(s,q(n.onDone).map(i=>P(e,s,i)))}if(n.onError){const s=`xstate.error.actor.${n.id}`;t.set(s,q(n.onError).map(i=>P(e,s,i)))}if(n.onSnapshot){const s=`xstate.snapshot.${n.id}`;t.set(s,q(n.onSnapshot).map(i=>P(e,s,i)))}}for(const n of e.after){let s=t.get(n.eventType);s||(s=[],t.set(n.eventType,s)),s.push(n)}return t}function nn(e,t){const n=typeof t=="string"?e.states[t]:t?e.states[t.target]:void 0;if(!n&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${e.id}`);const s={source:e,actions:!t||typeof t=="string"?[]:V(t.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...s,source:`#${e.id}`,target:n?[`#${n.id}`]:[]})};return s}function sn(e,t){if(t!==void 0)return t.map(n=>{if(typeof n!="string")return n;if(ft(n))return e.machine.getStateNodeById(n);const s=n[0]===Ht;if(s&&!e.parent)return ct(e,n.slice(1));const i=s?e.key+n:n;if(e.parent)try{return ct(e.parent,i)}catch(o){throw new Error(`Invalid transition definition for state node '${e.id}':
${o.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function ae(e){const t=ne(e.config.target);return t?{target:t.map(n=>typeof n=="string"?ct(e.parent,n):n)}:e.parent.initial}function J(e){return e.type==="history"}function Pt(e){const t=ce(e);for(const n of t)for(const s of it(n,e))t.add(s);return t}function ce(e){const t=new Set;function n(s){if(!t.has(s)){if(t.add(s),s.type==="compound")n(s.initial.target[0]);else if(s.type==="parallel")for(const i of X(s))n(i)}}return n(e),t}function H(e,t){if(ft(t))return e.machine.getStateNodeById(t);if(!e.states)throw new Error(`Unable to retrieve child state '${t}' from '${e.id}'; no child states exist.`);const n=e.states[t];if(!n)throw new Error(`Child state '${t}' does not exist on '${e.id}'`);return n}function ct(e,t){if(typeof t=="string"&&ft(t))try{return e.machine.getStateNodeById(t)}catch{}const n=Tt(t).slice();let s=e;for(;n.length;){const i=n.shift();if(!i.length)break;s=H(s,i)}return s}function lt(e,t){if(typeof t=="string"){const i=e.states[t];if(!i)throw new Error(`State '${t}' does not exist on '${e.id}'`);return[e,i]}const n=Object.keys(t),s=n.map(i=>H(e,i)).filter(Boolean);return[e.machine.root,e].concat(s,n.reduce((i,o)=>{const r=H(e,o);if(!r)return i;const a=lt(r,t[o]);return i.concat(a)},[]))}function on(e,t,n,s){const o=H(e,t).next(n,s);return!o||!o.length?e.next(n,s):o}function rn(e,t,n,s){const i=Object.keys(t),o=H(e,i[0]),r=$t(o,t[i[0]],n,s);return!r||!r.length?e.next(n,s):r}function an(e,t,n,s){const i=[];for(const o of Object.keys(t)){const r=t[o];if(!r)continue;const a=H(e,o),c=$t(a,r,n,s);c&&i.push(...c)}return i.length?i:e.next(n,s)}function $t(e,t,n,s){return typeof t=="string"?on(e,t,n,s):Object.keys(t).length===1?rn(e,t,n,s):an(e,t,n,s)}function cn(e){return Object.keys(e.states).map(t=>e.states[t]).filter(t=>t.type==="history")}function z(e,t){let n=e;for(;n.parent&&n.parent!==t;)n=n.parent;return n.parent===t}function ln(e,t){const n=new Set(e),s=new Set(t);for(const i of n)if(s.has(i))return!0;for(const i of s)if(n.has(i))return!0;return!1}function le(e,t,n){const s=new Set;for(const i of e){let o=!1;const r=new Set;for(const a of s)if(ln(wt([i],t,n),wt([a],t,n)))if(z(i.source,a.source))r.add(a);else{o=!0;break}if(!o){for(const a of r)s.delete(a);s.add(i)}}return Array.from(s)}function un(e){const[t,...n]=e;for(const s of it(t,void 0))if(n.every(i=>z(i,s)))return s}function jt(e,t){if(!e.target)return[];const n=new Set;for(const s of e.target)if(J(s))if(t[s.id])for(const i of t[s.id])n.add(i);else for(const i of jt(ae(s),t))n.add(i);else n.add(s);return[...n]}function ue(e,t){const n=jt(e,t);if(!n)return;if(!e.reenter&&n.every(i=>i===e.source||z(i,e.source)))return e.source;const s=un(n.concat(e.source));if(s)return s;if(!e.reenter)return e.source.machine.root}function wt(e,t,n){const s=new Set;for(const i of e)if(i.target?.length){const o=ue(i,n);i.reenter&&i.source===o&&s.add(o);for(const r of t)z(r,o)&&s.add(r)}return[...s]}function dn(e,t){if(e.length!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function kt(e,t,n,s,i,o){if(!e.length)return t;const r=new Set(t._nodes);let a=t.historyValue;const c=le(e,r,a);let l=t;i||([l,a]=mn(l,s,n,c,r,a,o,n.actionExecutor)),l=Y(l,s,n,c.flatMap(u=>u.actions),o,void 0),l=hn(l,s,n,c,r,o,a,i);const h=[...r];l.status==="done"&&(l=Y(l,s,n,h.sort((u,d)=>d.order-u.order).flatMap(u=>u.exit),o,void 0));try{return a===t.historyValue&&dn(t._nodes,r)?l:F(l,{_nodes:h,historyValue:a})}catch(u){throw u}}function fn(e,t,n,s,i){if(s.output===void 0)return;const o=bt(i.id,i.output!==void 0&&i.parent?St(i.output,e.context,t,n.self):void 0);return St(s.output,e.context,o,n.self)}function hn(e,t,n,s,i,o,r,a){let c=e;const l=new Set,h=new Set;pn(s,r,h,l),a&&h.add(e.machine.root);const u=new Set;for(const d of[...l].sort((f,p)=>f.order-p.order)){i.add(d);const f=[];f.push(...d.entry);for(const p of d.invoke)f.push(Ye(p.src,{...p,syncSnapshot:!!p.onSnapshot}));if(h.has(d)){const p=d.initial.actions;f.push(...p)}if(c=Y(c,t,n,f,o,d.invoke.map(p=>p.id)),d.type==="final"){const p=d.parent;let _=p?.type==="parallel"?p:p?.parent,v=_||d;for(p?.type==="compound"&&o.push(bt(p.id,d.output!==void 0?St(d.output,c.context,t,n.self):void 0));_?.type==="parallel"&&!u.has(_)&&Lt(i,_);)u.add(_),o.push(bt(_.id)),v=_,_=_.parent;if(_)continue;c=F(c,{status:"done",output:fn(c,t,n,c.machine.root,v)})}}return c}function pn(e,t,n,s){for(const i of e){const o=ue(i,t);for(const a of i.target||[])!J(a)&&(i.source!==a||i.source!==o||i.reenter)&&(s.add(a),n.add(a)),W(a,t,n,s);const r=jt(i,t);for(const a of r){const c=it(a,o);o?.type==="parallel"&&c.push(o),de(s,t,n,c,!i.source.parent&&i.reenter?void 0:o)}}}function W(e,t,n,s){if(J(e))if(t[e.id]){const i=t[e.id];for(const o of i)s.add(o),W(o,t,n,s);for(const o of i)_t(o,e.parent,s,t,n)}else{const i=ae(e);for(const o of i.target)s.add(o),i===e.parent?.initial&&n.add(e.parent),W(o,t,n,s);for(const o of i.target)_t(o,e.parent,s,t,n)}else if(e.type==="compound"){const[i]=e.initial.target;J(i)||(s.add(i),n.add(i)),W(i,t,n,s),_t(i,e,s,t,n)}else if(e.type==="parallel")for(const i of X(e).filter(o=>!J(o)))[...s].some(o=>z(o,i))||(J(i)||(s.add(i),n.add(i)),W(i,t,n,s))}function de(e,t,n,s,i){for(const o of s)if((!i||z(o,i))&&e.add(o),o.type==="parallel")for(const r of X(o).filter(a=>!J(a)))[...e].some(a=>z(a,r))||(e.add(r),W(r,t,n,e))}function _t(e,t,n,s,i){de(n,s,i,it(e,t))}function mn(e,t,n,s,i,o,r,a){let c=e;const l=wt(s,i,o);l.sort((u,d)=>d.order-u.order);let h;for(const u of l)for(const d of cn(u)){let f;d.history==="deep"?f=p=>Ct(p)&&z(p,u):f=p=>p.parent===u,h??={...o},h[d.id]=Array.from(i).filter(f)}for(const u of l)c=Y(c,t,n,[...u.exit,...u.invoke.map(d=>se(d.id))],r,void 0),i.delete(u);return[c,h||o]}function vn(e,t){return e.implementations.actions[t]}function fe(e,t,n,s,i,o){const{machine:r}=e;let a=e;for(const c of s){const l=typeof c=="function",h=l?c:vn(r,typeof c=="string"?c:c.type),u={context:a.context,event:t,self:n.self,system:n.system},d=l||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:a.context,event:t}):c.params:void 0;if(!h||!("resolve"in h)){n.actionExecutor({type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",info:u,params:d,exec:h});continue}const f=h,[p,_,v]=f.resolve(n,a,u,d,h,i);a=p,"retryResolve"in f&&o?.push([f,_]),"execute"in f&&n.actionExecutor({type:f.type,info:u,params:_,exec:f.execute.bind(null,n,_)}),v&&(a=fe(a,t,n,v,i,o))}return a}function Y(e,t,n,s,i,o){const r=o?[]:void 0,a=fe(e,t,n,s,{internalQueue:i,deferredActorIds:o},r);return r?.forEach(([c,l])=>{c.retryResolve(n,a,l)}),a}function yt(e,t,n,s){let i=e;const o=[];function r(l,h,u){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:h,snapshot:l,_transitions:u}),o.push(l)}if(t.type===xt)return i=F(Jt(i,t,n),{status:"stopped"}),r(i,t,[]),{snapshot:i,microstates:o};let a=t;if(a.type!==Nt){const l=a,h=Ue(l),u=Ft(l,i);if(h&&!u.length)return i=F(e,{status:"error",error:l.error}),r(i,l,[]),{snapshot:i,microstates:o};i=kt(u,e,n,a,!1,s),r(i,l,u)}let c=!0;for(;i.status==="active";){let l=c?gn(i,a):[];const h=l.length?i:void 0;if(!l.length){if(!s.length)break;a=s.shift(),l=Ft(a,i)}i=kt(l,i,n,a,!1,s),c=i!==h,r(i,a,l)}return i.status!=="active"&&Jt(i,a,n),{snapshot:i,microstates:o}}function Jt(e,t,n){return Y(e,t,n,Object.values(e.children).map(s=>se(s)),[],void 0)}function Ft(e,t){return t.machine.getTransitionData(t,e)}function gn(e,t){const n=new Set,s=e._nodes.filter(Ct);for(const i of s)t:for(const o of[i].concat(it(i,void 0)))if(o.always){for(const r of o.always)if(r.guard===void 0||It(r.guard,e.context,t,e)){n.add(r);break t}}return le(Array.from(n),new Set(e._nodes),e.historyValue)}function _n(e,t){const n=at(lt(e,t));return re(e,[...n])}function yn(e){return!!e&&typeof e=="object"&&"machine"in e&&"value"in e}const xn=function(t){return Qt(t,this.value)},bn=function(t){return this.tags.has(t)},Sn=function(t){const n=this.machine.getTransitionData(this,t);return!!n?.length&&n.some(s=>s.target!==void 0||s.actions.length)},wn=function(){const{_nodes:t,tags:n,machine:s,getMeta:i,toJSON:o,can:r,hasTag:a,matches:c,...l}=this;return{...l,tags:Array.from(n)}},kn=function(){return this._nodes.reduce((t,n)=>(n.meta!==void 0&&(t[n.id]=n.meta),t),{})};function ot(e,t){return{status:e.status,output:e.output,error:e.error,machine:t,context:e.context,_nodes:e._nodes,value:re(t.root,e._nodes),tags:new Set(e._nodes.flatMap(n=>n.tags)),children:e.children,historyValue:e.historyValue||{},matches:xn,hasTag:bn,can:Sn,getMeta:kn,toJSON:wn}}function F(e,t={}){return ot({...e,...t},e.machine)}function Tn(e){if(typeof e!="object"||e===null)return{};const t={};for(const n in e){const s=e[n];Array.isArray(s)&&(t[n]=s.map(i=>({id:i.id})))}return t}function En(e,t){const{_nodes:n,tags:s,machine:i,children:o,context:r,can:a,hasTag:c,matches:l,getMeta:h,toJSON:u,...d}=e,f={};for(const _ in o){const v=o[_];f[_]={snapshot:v.getPersistedSnapshot(t),src:v.src,systemId:v.systemId,syncSnapshot:v._syncSnapshot}}return{...d,context:he(r),children:f,historyValue:Tn(d.historyValue)}}function he(e){let t;for(const n in e){const s=e[n];if(s&&typeof s=="object")if("sessionId"in s&&"send"in s&&"ref"in s)t??=Array.isArray(e)?e.slice():{...e},t[n]={xstate$$type:At,id:s.id};else{const i=he(s);i!==s&&(t??=Array.isArray(e)?e.slice():{...e},t[n]=i)}}return t??e}function An(e,t,n,s,{event:i,id:o,delay:r},{internalQueue:a}){const c=t.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const l=typeof i=="function"?i(n,s):i;let h;if(typeof r=="string"){const u=c&&c[r];h=typeof u=="function"?u(n,s):u}else h=typeof r=="function"?r(n,s):r;return typeof h!="number"&&a.push(l),[t,{event:l,id:o,delay:h},void 0]}function In(e,t){const{event:n,delay:s,id:i}=t;if(typeof s=="number"){e.defer(()=>{const o=e.self;e.system.scheduler.schedule(o,o,n,s,i)});return}}function Cn(e,t){function n(s,i){}return n.type="xstate.raise",n.event=e,n.id=t?.id,n.delay=t?.delay,n.resolve=An,n.execute=In,n}function Ln(e,{machine:t,context:n},s,i){const o=(r,a)=>{if(typeof r=="string"){const c=Et(t,r);if(!c)throw new Error(`Actor logic '${r}' not implemented in machine '${t.id}'`);const l=st(c,{id:a?.id,parent:e.self,syncSnapshot:a?.syncSnapshot,input:typeof a?.input=="function"?a.input({context:n,event:s,self:e.self}):a?.input,src:r,systemId:a?.systemId});return i[l.id]=l,l}else return st(r,{id:a?.id,parent:e.self,syncSnapshot:a?.syncSnapshot,input:a?.input,src:r,systemId:a?.systemId})};return(r,a)=>{const c=o(r,a);return i[c.id]=c,e.defer(()=>{c._processingStatus!==A.Stopped&&c.start()}),c}}function $n(e,t,n,s,{assignment:i}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const o={},r={context:t.context,event:n.event,spawn:Ln(e,t,n.event,o),self:e.self,system:e.system};let a={};if(typeof i=="function")a=i(r,s);else for(const l of Object.keys(i)){const h=i[l];a[l]=typeof h=="function"?h(r,s):h}const c=Object.assign({},t.context,a);return[F(t,{context:c,children:Object.keys(o).length?{...t.children,...o}:t.children}),void 0,void 0]}function jn(e){function t(n,s){}return t.type="xstate.assign",t.assignment=e,t.resolve=$n,t}const Gt=new WeakMap;function G(e,t,n){let s=Gt.get(e);return s?t in s||(s[t]=n()):(s={[t]:n()},Gt.set(e,s)),s[t]}const Mn={},tt=e=>typeof e=="string"?{type:e}:typeof e=="function"?"resolve"in e?{type:e.type}:{type:e.name}:e;class ut{constructor(t,n){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Ht),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?zt(this.config.states,(s,i)=>new ut(s,{_parent:this,_key:i,_machine:this.machine})):Mn,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=V(this.config.entry).slice(),this.exit=V(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=V(t.tags).slice()}_initialize(){this.transitions=en(this),this.config.always&&(this.always=q(this.config.always).map(t=>P(this,Yt,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(tt),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(tt),eventType:null})}:void 0,history:this.history,states:zt(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(tt)})),entry:this.entry.map(tt),exit:this.exit.map(tt),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return G(this,"invoke",()=>V(this.config.invoke).map((t,n)=>{const{src:s,systemId:i}=t,o=t.id??Ut(this.id,n),r=typeof s=="string"?s:`xstate.invoke.${Ut(this.id,n)}`;return{...t,src:r,id:o,systemId:i,toJSON(){const{onDone:a,onError:c,...l}=t;return{...l,type:"xstate.invoke",src:r,id:o}}}}))}get on(){return G(this,"on",()=>[...this.transitions].flatMap(([n,s])=>s.map(i=>[n,i])).reduce((n,[s,i])=>(n[s]=n[s]||[],n[s].push(i),n),{}))}get after(){return G(this,"delayedTransitions",()=>tn(this))}get initial(){return G(this,"initial",()=>nn(this,this.config.initial))}next(t,n){const s=n.type,i=[];let o;const r=G(this,`candidates-${s}`,()=>Qe(this,s));for(const a of r){const{guard:c}=a,l=t.context;let h=!1;try{h=!c||It(c,l,n,t)}catch(u){const d=typeof c=="string"?c:typeof c=="object"?c.type:void 0;throw new Error(`Unable to evaluate guard ${d?`'${d}' `:""}in transition for event '${s}' in state node '${this.id}':
${u.message}`)}if(h){i.push(...a.actions),o=a;break}}return o?[o]:void 0}get events(){return G(this,"events",()=>{const{states:t}=this,n=new Set(this.ownEvents);if(t)for(const s of Object.keys(t)){const i=t[s];if(i.states)for(const o of i.events)n.add(`${o}`)}return Array.from(n)})}get ownEvents(){const t=Object.keys(Object.fromEntries(this.transitions)),n=new Set(t.filter(s=>this.transitions.get(s).some(i=>!(!i.target&&!i.actions.length&&!i.reenter))));return Array.from(n)}}const On="#";class Mt{constructor(t,n){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:n?.actors??{},actions:n?.actions??{},delays:n?.delays??{},guards:n?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new ut(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:n,guards:s,actors:i,delays:o}=this.implementations;return new Mt(this.config,{actions:{...n,...t.actions},guards:{...s,...t.guards},actors:{...i,...t.actors},delays:{...o,...t.delays}})}resolveState(t){const n=_n(this.root,t.value),s=at(lt(this.root,n));return ot({_nodes:[...s],context:t.context||{},children:{},status:Lt(s,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,n,s){return yt(t,n,s,[]).snapshot}microstep(t,n,s){return yt(t,n,s,[]).microstates}getTransitionData(t,n){return $t(this.root,t.value,t,n)||[]}getPreInitialState(t,n,s){const{context:i}=this.config,o=ot({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?Y(o,n,t,[jn(({spawn:a,event:c,self:l})=>i({spawn:a,input:c.input,self:l}))],s,void 0):o}getInitialSnapshot(t,n){const s=Zt(n),i=[],o=this.getPreInitialState(t,s,i),r=kt([{target:[...ce(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],o,t,s,!0,i),{snapshot:a}=yt(r,s,t,i);return a}start(t){Object.values(t.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(t){const n=Tt(t),s=n.slice(1),i=ft(n[0])?n[0].slice(On.length):n[0],o=this.idMap.get(i);if(!o)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return ct(o,s)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,n){return En(t,n)}restoreSnapshot(t,n){const s={},i=t.children;Object.keys(i).forEach(u=>{const d=i[u],f=d.snapshot,p=d.src,_=typeof p=="string"?Et(this,p):p;if(!_)return;const v=st(_,{id:u,parent:n.self,syncSnapshot:d.syncSnapshot,snapshot:f,src:p,systemId:d.systemId});s[u]=v});function o(u,d){if(d instanceof ut)return d;try{return u.machine.getStateNodeById(d.id)}catch{}}function r(u,d){if(!d||typeof d!="object")return{};const f={};for(const p in d){const _=d[p];for(const v of _){const b=o(u,v);b&&(f[p]??=[],f[p].push(b))}}return f}const a=r(this.root,t.historyValue),c=ot({...t,children:s,_nodes:Array.from(at(lt(this.root,t.value))),historyValue:a},this),l=new Set;function h(u,d){if(!l.has(u)){l.add(u);for(const f in u){const p=u[f];if(p&&typeof p=="object"){if("xstate$$type"in p&&p.xstate$$type===At){u[f]=d[p.id];continue}h(p,d)}}}}return h(c.context,s),c}}function Rn(e,t){return new Mt(e,t)}function Dn(e,...[t,n]){const s=st(e,t);let i;return Kt(()=>{n&&(i=s.subscribe(rt(n))),s.start()}),ve(()=>{s.stop(),i?.unsubscribe()}),s}function Vn(e,t){return e===t}const qt=()=>{};function zn(e,t,n=Vn){const s=ge(e)?e:Rt(e),i=Rt(t(s.value?.getSnapshot())),o=r=>{n(i.value,r)||(i.value=r)};return et(s,(r,a,c)=>{if(i.value=t(r?.getSnapshot()),!r)return;const l=r.subscribe({next:h=>{o(t(h))},error:qt,complete:qt});c(()=>l.unsubscribe())},{immediate:!0}),i}function Un(e,t={}){function n(o){i.value=o}const s=Dn(e,t,n),i=zn(s,o=>o);return{snapshot:i,send:s.send,actorRef:s}}function Bn(e,...[t]){return Un(e,t)}const Pn=N({__name:"game-board",props:{text:{},regex:{},targets:{}},setup(e,{expose:t}){t();const n=e,s=$(()=>{if(!n.text)return[];let o=[];if(n.regex)try{const l=new RegExp(n.regex,"g");let h;for(;(h=l.exec(n.text))!==null&&(o.push({start:h.index,end:h.index+h[0].length,type:"regex"}),h[0].length!==0););}catch{}const r=[];let a=0;o.sort((l,h)=>l.start-h.start);const c=[];for(const l of o)if(c.length===0)c.push({...l});else{const h=c[c.length-1];l.start<=h.end?h.end=Math.max(h.end,l.end):c.push({...l})}for(const l of c)l.start>a&&r.push({text:n.text.substring(a,l.start),highlighted:!1}),r.push({text:n.text.substring(l.start,l.end),highlighted:!0}),a=l.end;return a<n.text.length&&r.push({text:n.text.substring(a),highlighted:!1}),r.length>0?r:[{text:n.text,highlighted:!1}]}),i={props:n,highlightedText:s};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),Jn={key:0,class:"highlight"},Fn={key:1};function Gn(e,t,n,s,i,o){const r=x("v-card-text"),a=x("v-card");return S(),j(a,{class:"game-board",variant:"outlined"},{default:g(()=>[t[0]||(t[0]=m("div",{class:"window-controls"},[m("div",{class:"dot red"}),m("div",{class:"dot yellow"}),m("div",{class:"dot green"}),m("span",{class:"file-name"},"text.txt")],-1)),y(r,{class:"text-content"},{default:g(()=>[(S(!0),I(nt,null,dt(s.highlightedText,(c,l)=>(S(),I(nt,{key:l},[c.highlighted?(S(),I("span",Jn,k(c.text),1)):(S(),I("span",Fn,k(c.text),1))],64))),128))]),_:1})]),_:1})}const qn=Z(Pn,[["render",Gn]]),Wn=N({__name:"target-display",props:{targets:{},matchedTargets:{},modelValue:{},isValid:{type:Boolean},matchCount:{},streak:{}},emits:["update:modelValue","submit"],setup(e,{expose:t,emit:n}){t();const s=e,i=n,o=L(),r=L(null),a=Se();et(a,h=>{h&&o.value?.focus()}),et(()=>s.modelValue,h=>{if(!h){r.value=null;return}try{new RegExp(h),r.value=null}catch{r.value="Invalid regex syntax"}});const l={props:s,emit:i,inputRef:o,error:r,windowFocused:a,handleKeyDown:()=>{!r.value&&s.modelValue&&i("submit")}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),Kn={class:"flex items-center gap-2 mb-4 text-slate-300 font-medium"},Xn={key:0,class:"ml-auto streak-text"},Hn={class:"flex flex-wrap gap-3"},Yn={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full"};function Nn(e,t,n,s,i,o){const r=x("v-icon"),a=x("v-chip"),c=x("v-card-text"),l=x("v-text-field"),h=x("v-card-actions"),u=x("v-card-outlined");return S(),j(u,null,{default:g(()=>[y(c,null,{default:g(()=>[m("div",Kn,[y(r,{size:"20",color:"secondary"},{default:g(()=>[...t[1]||(t[1]=[T("mdi-target",-1)])]),_:1}),t[3]||(t[3]=m("span",null,"Find these patterns",-1)),n.streak>1?(S(),I("span",Xn,[y(r,{size:"16",color:"warning"},{default:g(()=>[...t[2]||(t[2]=[T("mdi-lightning-bolt",-1)])]),_:1}),T(" "+k(n.streak)+"x streak ",1)])):K("",!0)]),m("div",Hn,[(S(!0),I(nt,null,dt(n.targets,(d,f)=>(S(),j(a,{key:f,color:n.matchedTargets.includes(f)?"success":"primary",variant:n.matchedTargets.includes(f)?"flat":"outlined",class:"font-mono text-sm relative"},{default:g(()=>[y(r,{size:"16",icon:n.matchedTargets.includes(f)?"mdi-check-circle":"mdi-circle-outline",class:"mr-2"},null,8,["icon"]),m("span",{class:Xt({"line-through opacity-60":n.matchedTargets.includes(f)})},' "'+k(d.text)+'" ',3),n.matchedTargets.includes(f)?(S(),I("span",Yn)):K("",!0)]),_:2},1032,["color","variant"]))),128))])]),_:1}),y(h,{class:"px-4 pb-4 pt-0"},{default:g(()=>[y(l,{rounded:"xl",ref:"inputRef","model-value":n.modelValue,"onUpdate:modelValue":t[0]||(t[0]=d=>s.emit("update:modelValue",d)),onKeydown:_e(s.handleKeyDown,["enter"]),placeholder:"enter your regex...",variant:"solo-filled",density:"comfortable",color:"primary","base-color":"primary","hide-details":"auto","prepend-inner-icon":"mdi-console",prefix:"/",suffix:"/g","error-messages":s.error||void 0,messages:n.isValid?"All targets matched! Press Enter to continue":void 0,autofocus:"","single-line":"",flat:"",class:"regex-input"},{"append-inner":g(()=>[n.modelValue&&!s.error?(S(),j(a,{key:0,color:n.matchCount>0?"success":"default",size:"small",variant:"tonal"},{default:g(()=>[T(k(n.matchCount)+" match"+k(n.matchCount!==1?"es":""),1)]),_:1},8,["color"])):K("",!0)]),_:1},8,["model-value","error-messages","messages"])]),_:1})]),_:1})}const Zn=Z(Wn,[["render",Nn]]),Qn=N({__name:"level-indicator",props:{level:{},score:{}},setup(e,{expose:t}){t();const n={};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),ts={class:"level-indicator"},es={class:"level-pill"},ns={class:"level-badge"},ss={class:"badge"},is={class:"level-text"},os={class:"score-value"};function rs(e,t,n,s,i,o){const r=x("v-icon");return S(),I("div",ts,[m("div",es,[m("div",ns,[t[0]||(t[0]=m("div",{class:"glow"},null,-1)),m("div",ss,k(n.level),1)]),m("span",is,"Challenge "+k(n.level),1),t[2]||(t[2]=m("span",{class:"divider"},"|",-1)),y(r,{size:"18",color:"warning"},{default:g(()=>[...t[1]||(t[1]=[T("mdi-trophy",-1)])]),_:1}),m("span",os,k(n.score.toLocaleString()),1)])])}const as=Z(Qn,[["render",rs]]),cs=N({__name:"success-modal",props:{modelValue:{type:Boolean},level:{},score:{},pointsEarned:{}},emits:["update:modelValue","nextLevel"],setup(e,{expose:t,emit:n}){t();const s=n,o={emit:s,handleNextLevel:()=>{s("update:modelValue",!1),s("nextLevel")}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),ls={class:"icon-container"},us={class:"icon-main"},ds={class:"stats-row"},fs={class:"stat-value"},hs={class:"stat-value-row"},ps={class:"stat-value"};function ms(e,t,n,s,i,o){const r=x("v-icon"),a=x("v-card-title"),c=x("v-card-text"),l=x("v-card"),h=x("v-btn"),u=x("v-card-actions"),d=x("v-dialog");return S(),j(d,{"model-value":n.modelValue,"max-width":"400",persistent:"",class:"success-modal"},{default:g(()=>[y(l,{class:"modal-card"},{default:g(()=>[t[8]||(t[8]=m("div",{class:"glow-effect"},null,-1)),m("div",ls,[t[1]||(t[1]=m("div",{class:"icon-bg"},null,-1)),m("div",us,[y(r,{size:"40",color:"white"},{default:g(()=>[...t[0]||(t[0]=[T("mdi-sparkles",-1)])]),_:1})])]),y(a,{class:"modal-title"},{default:g(()=>[...t[2]||(t[2]=[T(" Level Complete! ",-1)])]),_:1}),y(c,{class:"modal-text"},{default:g(()=>[T(" You've mastered level "+k(n.level),1)]),_:1}),m("div",ds,[y(l,{class:"stat-card points",variant:"outlined"},{default:g(()=>[m("span",fs,"+"+k(n.pointsEarned),1),t[3]||(t[3]=m("span",{class:"stat-label"},"points",-1))]),_:1}),y(l,{class:"stat-card total",variant:"outlined"},{default:g(()=>[m("div",hs,[y(r,{size:"20",color:"warning"},{default:g(()=>[...t[4]||(t[4]=[T("mdi-trophy",-1)])]),_:1}),m("span",ps,k(n.score),1)]),t[5]||(t[5]=m("span",{class:"stat-label"},"total score",-1))]),_:1})]),y(u,{class:"modal-actions"},{default:g(()=>[y(h,{block:"",size:"large",class:"next-btn",onClick:s.handleNextLevel},{default:g(()=>[t[7]||(t[7]=T(" Next Level ",-1)),y(r,{class:"ml-2"},{default:g(()=>[...t[6]||(t[6]=[T("mdi-arrow-right",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}const vs=Z(cs,[["render",ms]]),gs=N({__name:"regex-legend",props:{modelValue:{type:Boolean},currentLevel:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){t();const s=e,i=n,o=$(()=>ke(s.currentLevel)),r=$(()=>new Set(o.value.map(u=>u.id))),h={props:s,emit:i,availableFeatures:o,availableIds:r,isUnlocked:u=>r.value.has(u),getUnlockLevel:u=>Math.ceil((u-2)/.8),close:()=>i("update:modelValue",!1),get REGEX_FEATURES(){return Te}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),_s={class:"header-content"},ys={class:"icon-box"},xs={class:"header-text"},bs={class:"features-grid"},Ss={key:0,class:"locked-overlay"},ws={class:"feature-header"},ks={class:"feature-icon"},Ts={class:"feature-info"},Es={class:"feature-meta"},As={class:"feature-description"},Is={class:"feature-example"};function Cs(e,t,n,s,i,o){const r=x("v-icon"),a=x("v-btn"),c=x("v-card-title"),l=x("v-card"),h=x("v-alert"),u=x("v-card-text"),d=x("v-dialog");return S(),j(d,{"model-value":n.modelValue,"max-width":"900",scrollable:"","onUpdate:modelValue":t[0]||(t[0]=f=>s.emit("update:modelValue",f))},{default:g(()=>[y(l,{class:"legend-card"},{default:g(()=>[y(c,{class:"legend-header"},{default:g(()=>[m("div",_s,[m("div",ys,[y(r,{color:"white"},{default:g(()=>[...t[1]||(t[1]=[T("mdi-book-open-variant",-1)])]),_:1})]),m("div",xs,[t[2]||(t[2]=m("h2",null,"Regex Pattern Guide",-1)),m("p",null,"Level "+k(n.currentLevel)+" - "+k(s.availableFeatures.length)+" features unlocked",1)])]),y(a,{icon:"",variant:"text",onClick:s.close},{default:g(()=>[y(r,null,{default:g(()=>[...t[3]||(t[3]=[T("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),y(u,{class:"legend-content"},{default:g(()=>[m("div",bs,[(S(!0),I(nt,null,dt(s.REGEX_FEATURES,f=>(S(),j(l,{key:f.id,class:Xt(["feature-card",{locked:!s.isUnlocked(f.id)}]),variant:"outlined"},{default:g(()=>[s.isUnlocked(f.id)?K("",!0):(S(),I("div",Ss,[y(r,{size:"24",color:"grey"},{default:g(()=>[...t[4]||(t[4]=[T("mdi-lock",-1)])]),_:1}),m("span",null,"Unlocks at Level "+k(s.getUnlockLevel(f.difficulty_score)),1)])),m("div",ws,[m("div",ks,[y(r,null,{default:g(()=>[T(k(f.icon),1)]),_:2},1024)]),m("div",Ts,[m("h4",null,k(f.name),1),m("div",Es,[m("span",null,"Difficulty: "+k(f.difficulty_score),1),s.isUnlocked(f.id)?(S(),j(r,{key:0,size:"12",color:"success"},{default:g(()=>[...t[5]||(t[5]=[T(" mdi-check-circle ",-1)])]),_:1})):K("",!0)])])]),m("p",As,k(f.description),1),m("div",Is,[t[6]||(t[6]=m("span",{class:"example-label"},"Example",-1)),m("code",null,"/"+k(f.example)+"/g",1),m("p",null,k(f.explanation),1)])]),_:2},1032,["class"]))),128))]),y(h,{type:"info",variant:"tonal",class:"mt-6"},{default:g(()=>[...t[7]||(t[7]=[m("strong",null,"Tip:",-1),T(" As you progress through levels, more advanced regex features will unlock automatically. Practice with simpler patterns first! ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}const Ls=Z(gs,[["render",Cs]]),$s=[{key:"quotable",url:"https://api.quotable.io/random?minLength=100&maxLength=300",parser:e=>e.content},{key:"uselessfacts",url:"https://uselessfacts.jsph.pl/api/v2/facts/random",parser:e=>e.text},{key:"chucknorris",url:"https://api.chucknorris.io/jokes/random",parser:e=>e.value},{key:"adviceslip",url:"https://api.adviceslip.com/advice",parser:e=>e.slip.advice},{key:"catfact",url:"https://catfact.ninja/fact",parser:e=>e.fact},{key:"jokes",url:"https://official-joke-api.appspot.com/random_joke",parser:e=>`${e.setup} ${e.punchline}`}],Wt="The quick brown fox jumps over the lazy dog. Programming is the art of telling a computer what to do. Numbers like 123 and 456 are important. Characters repeat sometimes, like ooooh or ahhhh!",js=xe("text",()=>{const e=Q("regex-game-text",""),t=Q("regex-game-targets",[]),n=Q("regex-game-features",[]),s=L(!1),i=Q("regex-game-cache",{}),o=Q("regex-game-seen",[]),r=$({get:()=>i.value,set:v=>{const b={...i.value};for(const[w,E]of Object.entries(v)){const M=b[w]||[];b[w]=[...new Set([...M,...E])]}i.value=b}}),a=$(()=>Object.values(i.value).flat()),c=$(()=>{const v=new Set(o.value);return a.value.filter(b=>!v.has(b))}),l=$(()=>a.value.length>0&&c.value.length===0);function h(){e.value&&!o.value.includes(e.value)&&(o.value=[...new Set([...o.value,e.value])])}function u(v,b){!b||b.length<50||(r.value={[v]:[b]})}function d(){return c.value.length===0?null:c.value[Math.floor(Math.random()*c.value.length)]}async function f(v){const w=await(await fetch(v.url)).json(),E=v.parser(w);return{key:v.key,text:E}}function p(v,b){const w=Ee(v,b,3);return w?(e.value=v,t.value=w.targets,n.value=w.features,!0):!1}async function _(v){s.value=!0;const b=d();if(b&&p(b,v)){s.value=!1;return}l.value&&(o.value=[]);const w=$s.map(E=>f(E).then(M=>(u(M.key,M.text),M)).catch(()=>null));try{const E=await Promise.race(w.map(M=>M.then(D=>{if(D&&D.text&&D.text.length>=50)return D;throw new Error("Invalid text")})));if(E&&p(E.text,v)){s.value=!1,Promise.allSettled(w);return}}catch{const E=d();if(E&&p(E,v)){s.value=!1;return}}p(Wt,v)||(e.value=Wt,t.value=[{text:"qui",feature:"literal",featureName:"Literal Characters"},{text:"fox",feature:"literal",featureName:"Literal Characters"},{text:"art",feature:"literal",featureName:"Literal Characters"}],n.value=[]),s.value=!1}return{text:e,targets:t,currentFeatures:n,isLoading:s,textCache:r,markText:h,getText:_}}),Ms=N({__name:"game",setup(e,{expose:t}){t();const n=Rn({id:"layoutVisibility",initial:"active",states:{active:{on:{DEACTIVATE:"inactive"}},inactive:{on:{ACTIVATE:"active"}}}}),s=js(),{text:i,targets:o,currentFeatures:r,isLoading:a}=be(s),c=we(),{snapshot:l,send:h}=Bn(n);et(c,O=>{h({type:O==="visible"?"ACTIVATE":"DEACTIVATE"})},{immediate:!0});const u=L(1),d=L(0),f=L(0),p=L(""),_=L(!1),v=L(0),b=L(!1),w=async()=>{p.value="",await s.getText(u.value)},E=$(()=>{if(!p.value||!i.value)return[];try{const O=new RegExp(p.value,"g"),U=[];let R;for(;(R=O.exec(i.value))!==null&&(U.push({start:R.index,end:R.index+R[0].length,text:R[0]}),R[0].length!==0););return o.value.map((B,me)=>U.some(vt=>Ae(vt.text,B.text)||B.start!==void 0&&B.end!==void 0&&vt.start<=B.start&&vt.end>=B.end)?me:-1).filter(B=>B!==-1)}catch{return[]}}),M=$(()=>{if(!p.value||!i.value)return 0;try{const O=new RegExp(p.value,"g"),U=i.value.match(O);return U?U.length:0}catch{return 0}}),D=$(()=>E.value.length===o.value.length&&o.value.length>0);et(D,O=>{window.dispatchEvent(new CustomEvent("game:state",{detail:{isAllMatched:O}}))});const ht=()=>{if(D.value){const O=100*u.value,U=f.value*25,R=O+U;v.value=R,d.value+=R,f.value++,s.markText(),_.value=!0}},pe=()=>{_.value=!1,u.value++,w()},pt=()=>{f.value=0,w()},mt=()=>{b.value=!0};Kt(()=>{w(),window.addEventListener("game:skip",pt),window.addEventListener("game:next",ht),window.addEventListener("game:show-guide",mt)}),ye(()=>{window.removeEventListener("game:skip",pt),window.removeEventListener("game:next",ht),window.removeEventListener("game:show-guide",mt)});const Ot={layoutVisibilityMachine:n,textStore:s,text:i,targets:o,currentFeatures:r,isLoading:a,visibility:c,snapshot:l,send:h,level:u,score:d,streak:f,regex:p,showSuccess:_,pointsEarned:v,showLegend:b,getText:w,matchedTargets:E,matchCount:M,isAllMatched:D,handleSubmit:ht,handleNextLevel:pe,handleSkip:pt,handleShowGuide:mt,GameBoard:qn,TargetDisplay:Zn,LevelIndicator:as,SuccessModal:vs,RegexLegend:Ls};return Object.defineProperty(Ot,"__isScriptSetup",{enumerable:!1,value:!0}),Ot}}),Os={class:"game-page"},Rs={class:"game-container"},Ds={class:"game-header"},Vs={key:0,class:"loading-state"},zs={key:1,class:"game-content"},Us={class:"flex items-center gap-3 mb-3 font-medium"},Bs={class:"flex flex-wrap gap-2 mb-2"};function Ps(e,t,n,s,i,o){const r=x("v-progress-circular"),a=x("v-icon"),c=x("v-chip"),l=x("v-card-text"),h=x("v-card-info");return S(),I("div",Os,[t[7]||(t[7]=m("div",{class:"peek-container"},[m("span",{class:"peek-title sigmar-ff"},"run-regex-run")],-1)),m("div",Rs,[m("div",Ds,[y(s.LevelIndicator,{level:s.level,score:s.score},null,8,["level","score"])]),s.isLoading?(S(),I("div",Vs,[y(r,{indeterminate:"",color:"cyan",size:"40"}),t[3]||(t[3]=m("p",null,"Loading challenge...",-1))])):(S(),I("div",zs,[y(s.GameBoard,{text:s.text,regex:s.regex,targets:s.targets},null,8,["text","regex","targets"]),y(s.TargetDisplay,{modelValue:s.regex,"onUpdate:modelValue":t[0]||(t[0]=u=>s.regex=u),targets:s.targets,"matched-targets":s.matchedTargets,"is-valid":s.isAllMatched,"match-count":s.matchCount,streak:s.streak,onSubmit:s.handleSubmit},null,8,["modelValue","targets","matched-targets","is-valid","match-count","streak"]),s.currentFeatures.length>0?(S(),j(h,{key:0},{default:g(()=>[y(l,null,{default:g(()=>[m("div",Us,[y(a,{size:"20",color:"secondary"},{default:g(()=>[...t[4]||(t[4]=[T("mdi-lightbulb-on",-1)])]),_:1}),t[5]||(t[5]=m("span",{class:"text-purple-200"},"Features for this level",-1))]),m("div",Bs,[(S(!0),I(nt,null,dt(s.currentFeatures,(u,d)=>(S(),j(c,{key:d},{default:g(()=>[y(a,{size:"14",class:"mr-1"},{default:g(()=>[T(k(u.icon),1)]),_:2},1024),T(" "+k(u.name),1)]),_:2},1024))),128))]),t[6]||(t[6]=m("p",{class:"text-xs text-purple-200/70 m-0"},"Try using these patterns to match all targets",-1))]),_:1})]),_:1})):K("",!0)]))]),y(s.SuccessModal,{modelValue:s.showSuccess,"onUpdate:modelValue":t[1]||(t[1]=u=>s.showSuccess=u),level:s.level,score:s.score,"points-earned":s.pointsEarned,onNextLevel:s.handleNextLevel},null,8,["modelValue","level","score","points-earned"]),y(s.RegexLegend,{modelValue:s.showLegend,"onUpdate:modelValue":t[2]||(t[2]=u=>s.showLegend=u),"current-level":s.level},null,8,["modelValue","current-level"])])}const Ys=Z(Ms,[["render",Ps]]);export{Ys as default};
