---
import "../styles/global.css";
import ThemeToggle from "../components/theme-toggle.vue";

type Props = {
  pageTitle?: string;
};

const { pageTitle = "Regex Runner" } = Astro.props;
---

<!doctype html>
<html lang="en" class="antialiased break-words">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content="Master regular expressions one pattern at a time" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Sigmar&family=Kanit:ital,wght@0,300;0,400;0,700&display=swap"
      rel="stylesheet"
    />
    <title>{pageTitle}</title>
  </head>
  <body>
    <main class="max-w-4xl mx-auto min-h-screen pb-24">
      <slot />
      <footer class="text-sm text-center opacity-70 mb-20">
        <p>&copy; {new Date().getFullYear()} Regex Runner. All rights reserved.</p>
      </footer>
    </main>
    <header class="fixed bottom-4 left-0 right-0 z-20">
      <nav class="w-fit mx-auto flex items-center gap-4 rounded-full px-6 py-3 backdrop-blur-xl"
        style="box-shadow: inset 0 0 0.5px 1px hsla(0, 0%, 100%, 0.075), 0 0 0 1px hsla(0, 0%, 0%, 0.05), 0 0.3px 0.4px hsla(0, 0%, 0%, 0.02), 0 0.9px 1.5px hsla(0, 0%, 0%, 0.045), 0 3.5px 6px hsla(0, 0%, 0%, 0.09);">
        <a href="/" class="font-bold text-lg sigmar-ff">Regex</a>
        <a href="/settings" class="text-sm opacity-70 hover:opacity-100">Settings</a>
        <ThemeToggle client:load />
      </nav>
    </header>
  </body>
</html>

<script is:inline>
  // Apply theme before Vue hydrates to prevent flash
  const theme = localStorage?.getItem("theme") ||
    (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
  document.documentElement.classList.add(theme);
</script>
